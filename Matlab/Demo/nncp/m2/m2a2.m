%m2a2.m             构建CHNN，用于模式识别         
clear all;
close all;
%---给定4个数字(四种模式)
v7=[0 0 0 0 0 0 0 ...
    0 0 0 0 0 0 0 ...
    1 1 1 1 1 0 0 ...
    1 1 1 1 1 0 0 ...
    1 1 1 1 1 0 0 ...
    1 1 1 0 0 1 1 ...
    1 1 1 0 0 1 1 ...
    1 1 1 0 0 1 1]';        %数字“7”
v5=[0 0 0 0 0 0 1 ...
    0 0 0 0 0 0 1 ...
    0 0 1 1 1 1 1 ...
    0 0 1 1 1 1 1 ...
    1 0 0 0 0 1 1 ...
    1 1 1 1 1 0 0 ...
    1 1 1 1 1 0 0 ...
    0 0 0 0 0 1 1]';       %数字“5”
v4=[0 0 1 1 0 0 1 ...
    0 0 1 1 0 0 1 ...
    0 0 1 1 0 0 1 ...
    0 0 1 1 0 0 1 ...
    0 0 0 0 0 0 0 ...
    0 0 0 0 0 0 0 ...
    1 1 1 1 0 0 1 ...
    1 1 1 1 0 0 1]';        %数字“4”
v9=[1 1 1 0 0 1 1 ...
    1 0 0 1 1 0 0 ...
    1 0 0 1 1 0 0 ...
    1 0 0 1 1 0 0 ...
    1 1 0 0 0 0 0 ...
    1 1 1 1 1 0 0 ...
    1 1 1 1 1 0 0 ...
    1 1 1 1 1 0 0 ]';       %数字“9”
figure(1);                  %画4个数字
subplot(221),figt(v7);xlabel('(a)'),pause
subplot(222),figt(v5);xlabel('(b)'),pause
subplot(223),figt(v4);xlabel('(c)'),pause
subplot(224),figt(v9);xlabel('(d)'),pause
v=[v7 v5 v4 v9];

%---设计网络
net=newhop(v)              ;%求得权系值
w=net.lw{1,1}              ;%观测求取的权系值
b=net.b{1,1}; 

%---受扰动的“7”
v71=[0 0 0 0 0 0 1 ...
     0 1 0 0 0 0 0 ...
     1 1 1 1 1 0 0 ...
     1 1 1 1 1 0 0 ...
     1 1 1 1 1 0 0 ...
     1 1 1 0 0 1 1 ...
     1 1 1 0 0 1 1 ...
     0 1 1 0 0 1 1]'        ;%v71为受扰动的“7”

%---网络仿真1
y7=sim(net,1,[],v71);
y71=y7>0.5;                 ;%二值化

%---受扰动的“4”
v41=[0 0 1 1 0 0 1 ...
     0 0 1 1 0 0 1 ...
     0 0 1 1 0 0 1 ...
     0 0 1 1 0 0 1 ...
     0 0 0 0 0 0 0 ...
     0 0 0 0 0 0 1 ...
     1 1 1 1 1 0 1 ...
     1 1 1 1 0 1 1]'         ;%v41为受扰动的“4”

%---网络仿真2
y4=sim(net,1,[],v41);
y41=y4>0.5;         
figure(2);                               
subplot(221),figt(v71);xlabel('(e)'),pause
subplot(222),figt(y71);xlabel('(f)'),pause
subplot(223),figt(v41);xlabel('(h)'),pause
subplot(224),figt(y41);xlabel('(g)');


